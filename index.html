<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <link type="text/css" rel="stylesheet" href="css/style.css">
</html>
<body>
    <div class="container">
        <h1>Compiler Visualizations</h1>
        <h2>Lexer</h2>
        <p>The lexer scans source code, looking for tokens. Tokens are matched based on
        regular expressions, giving preference to longest matches and order. States are used to
        determine when certain expressions can be matched.</p>
        <p><a href="js/lex.js" target="_blank">Lex file</a></p>
        <div class="box cf">
            <div class="half">
                <h4>Source</h4>
                <pre class="source" contenteditable>
let
    function readline():string =
        /* strips leading spaces */
        let
            var ret:string := ""
            var buffer := getchar()
        in
            (while buffer = " " do
                buffer := getchar();
            while buffer <> "\n" do
                (ret := concat(ret, buffer);
                buffer := getchar());
            ret)
        end

    class Person extends Object {
        var name:string := "anonymous"
        method init() =
            (print("What is your name: ");
            name := readline())
    }

    var you := new Person
in
    you.init();
    print("hello, ");
    print(you.name);
    print("\n")
end</pre>
            </div>
            <div class="half">
                <p><b>Input</b>&nbsp;&nbsp;&nbsp;
                <code class="currentToken"></span></code>
                <p><b>State</b>&nbsp;&nbsp;&nbsp;
                <code class="currentState">initial</span></code>
                <h4>Tokens</h4>
                <p class="tokens"></p>
            </div>
        </div>
        <div class="controls">
            <button type="button" id="stopLexing">Stop</button>
            <button type="button" id="startLexing">Start</button>
            <button type="button" id="resumeLexing">Resume</button>
            <label for="speedRange">Speed</label>
            <input type="range" name="speedRange" id="speedRange" min=1 max=300 step=1 value=50>
        </div>

        <hr>
        <div class="box cf">
            <div class="half">
                <p class="tokens2"><span class="token" data-id="LET">LET</span> <span class="token" data-id="FUNCTION">FUNCTION</span> <span class="token" data-id="ID">ID "readline"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="COLON">COLON</span> <span class="token" data-id="ID">ID "string"</span> <span class="token" data-id="EQ">EQ</span> <span class="token" data-id="LET">LET</span> <span class="token" data-id="VAR">VAR</span> <span class="token" data-id="ID">ID "ret"</span> <span class="token" data-id="COLON">COLON</span> <span class="token" data-id="ID">ID "string"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="VAR">VAR</span> <span class="token" data-id="ID">ID "buffer"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="ID">ID "getchar"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="IN">IN</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="WHILE">WHILE</span> <span class="token" data-id="ID">ID "buffer"</span> <span class="token" data-id="EQ">EQ</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="DO">DO</span> <span class="token" data-id="ID">ID "buffer"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="ID">ID "getchar"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="WHILE">WHILE</span> <span class="token" data-id="ID">ID "buffer"</span> <span class="token" data-id="NEQ">NEQ</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="DO">DO</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="ID">ID "ret"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="ID">ID "concat"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="ID">ID "ret"</span> <span class="token" data-id="COMMA">COMMA</span> <span class="token" data-id="ID">ID "buffer"</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="ID">ID "buffer"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="ID">ID "getchar"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="ID">ID "ret"</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="END">END</span> <span class="token" data-id="CLASS">CLASS</span> <span class="token" data-id="ID">ID "Person"</span> <span class="token" data-id="EXTENDS">EXTENDS</span> <span class="token" data-id="ID">ID "Object"</span> <span class="token" data-id="LBRACE">LBRACE</span> <span class="token" data-id="VAR">VAR</span> <span class="token" data-id="ID">ID "name"</span> <span class="token" data-id="COLON">COLON</span> <span class="token" data-id="ID">ID "string"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="METHOD">METHOD</span> <span class="token" data-id="ID">ID "init"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="EQ">EQ</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="ID">ID "print"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="ID">ID "name"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="ID">ID "readline"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="RBRACE">RBRACE</span> <span class="token" data-id="VAR">VAR</span> <span class="token" data-id="ID">ID "you"</span> <span class="token" data-id="ASSIGN">ASSIGN</span> <span class="token" data-id="NEW">NEW</span> <span class="token" data-id="ID">ID "Person"</span> <span class="token" data-id="IN">IN</span> <span class="token" data-id="ID">ID "you"</span> <span class="token" data-id="DOT">DOT</span> <span class="token" data-id="ID">ID "init"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="ID">ID "print"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="ID">ID "print"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="ID">ID "you"</span> <span class="token" data-id="DOT">DOT</span> <span class="token" data-id="ID">ID "name"</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="SEMICOLON">SEMICOLON</span> <span class="token" data-id="ID">ID "print"</span> <span class="token" data-id="LPAREN">LPAREN</span> <span class="token" data-id="STRING">STRING ""</span> <span class="token" data-id="RPAREN">RPAREN</span> <span class="token" data-id="END">END</span> </p>
            </div>
            <div class="half">
                <ul class="parseStack">
                </ul>
            </div>
        </div>
        <div class="controls">
            <button type="button" id="stopParsing">Stop</button>
            <button type="button" id="startParsing">Start</button>
            <button type="button" id="resumeParsing">Resume</button>
        </div>
    </div>

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="js/lex.js" type="text/javascript"></script>
<script src="js/grm.js" type="text/javascript"></script>
<script src="js/lexer.js" type="text/javascript"></script>
<script src="js/parser.js" type="text/javascript"></script>
</body>
